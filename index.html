<!doctype html><html lang="sq"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Techi Hotspot Login</title>
<style>body{font-family:system-ui,Arial;background:#f6f6f6;margin:0}
.wrap{max-width:420px;margin:40px auto;padding:16px}
.card{background:#fff;border-radius:14px;padding:20px;box-shadow:0 8px 20px rgba(0,0,0,.06)}
.field{margin:10px 0}input{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px}
.btn{width:100%;padding:12px;border:0;border-radius:10px;background:#111;color:#fff;font-weight:600;cursor:pointer}
.small{font-size:12px;color:#666;text-align:center;margin-top:8px}</style>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-functions-compat.js"></script>
</head><body><div class="wrap"><div class="card">
<h2>Techi Hotspot</h2>
<div class="field"><input id="email" placeholder="Email"/></div>
<div class="field"><input id="pass" type="password" placeholder="Password"/></div>
<button class="btn" id="btn">Lidhu</button>
<div id="msg" class="small"></div>
</div></div>
<script>
const qs=new URLSearchParams(location.search);
const linkLogin=qs.get("link-login"); const linkOrig=qs.get("link-orig")||"http://example.com";

// ðŸ”§ ZÃ«vendÃ«so me tÃ« tuat nga Firebase Console â†’ Project settings â†’ Web app
const firebaseConfig={ apiKey:"YOUR_API_KEY", authDomain:"YOUR_PROJECT.firebaseapp.com", projectId:"YOUR_PROJECT" };
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth(); const functions=firebase.functions();

document.getElementById("btn").onclick=async()=>{
  const email=document.getElementById("email").value.trim();
  const pass=document.getElementById("pass").value.trim();
  const msg=(t)=>document.getElementById("msg").textContent=t;
  if(!email||!pass) return msg("PlotÃ«so email dhe fjalÃ«kalim.");
  if(!linkLogin) return msg("Mungon link-login nga MikroTik.");

  try{
    msg("Duke verifikuarâ€¦");
    await auth.signInWithEmailAndPassword(email,pass);

    msg("Duke krijuar akses nÃ« MikroTikâ€¦");
    const createUser=firebase.functions().httpsCallable("createHotspotUser");
    await createUser({ username: email, password: pass });

    msg("Duke u lidhur me hotspotâ€¦");
    const f=document.createElement("form");
    f.method="POST"; f.action=linkLogin;
    f.innerHTML=`<input type="hidden" name="username" value="${email}">
                 <input type="hidden" name="password" value="${pass}">
                 <input type="hidden" name="dst" value="${linkOrig}">`;
    document.body.appendChild(f); f.submit();
  }catch(e){ msg("Gabim: "+(e.message||e)); }
};
</script></body></html>
